<?xml version="1.0"?>
<xml-inputs priority="300" xmlns="http://axelor.com/xml/ns/data-import"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://axelor.com/xml/ns/data-import
  https://axelor.com/xml/ns/data-import/data-import_7.4.xsd">

    <input file="grados.xml" root="datos">
        <bind node="grados/grado" type="com.educaflow.apps.sistemaeducativo.db.Grado" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
        </bind>
    </input>

    <input file="niveles.xml" root="datos">
        <bind node="niveles/nivel" type="com.educaflow.apps.sistemaeducativo.db.Nivel" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
        </bind>
    </input>

    <input file="leyes_educativas.xml" root="datos">
        <bind node="leyes_educativas/ley_educativa" type="com.educaflow.apps.sistemaeducativo.db.LeyEducativa" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
        </bind>
    </input>


    <input file="familias_profesionales.xml" root="datos">
        <bind node="familias_profesionales/familia_profesional" type="com.educaflow.apps.sistemaeducativo.db.FamiliaProfesional" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
        </bind>
    </input>

    <input file="modulos.xml" root="datos">
        <bind node="modulos/modulo" type="com.educaflow.apps.sistemaeducativo.db.Modulo" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
        </bind>
    </input>


    <input file="ciclos.xml" root="datos">
        <bind node="ciclos/ciclo" type="com.educaflow.apps.sistemaeducativo.db.Ciclo" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />

            <!-- Relación con FamiliaProfesional -->
            <bind node="@familiaProfesional"
                  to="familiaProfesional"
                  search="self.code = :fpCode"
                  create="false">
                <bind node="." to="code" alias="fpCode"/>
            </bind>

            <!-- Relación con Grado -->
            <bind node="@grado"
                  to="grado"
                  search="self.code = :gradoCode"
                  create="false">
                <bind node="." to="code" alias="gradoCode"/>
            </bind>

            <bind node="@nivel"
                  to="nivel"
                  search="self.code = :nivelCode"
                  create="false">
                <bind node="." to="code" alias="nivelCode"/>
            </bind>

        </bind>
    </input>

    <input file="cursos.xml" root="datos">
        <bind node="cursos/curso" type="com.educaflow.apps.sistemaeducativo.db.Curso" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />

            <!-- Relación con Ciclo -->
            <bind node="@ciclo"
                  to="ciclo"
                  search="self.code = :cicloCode"
                  create="false">
                <bind node="." to="code" alias="cicloCode"/>
            </bind>
        </bind>
    </input>


    <input file="cursoModulos.xml" root="datos">
        <bind node="cursoModulos/cursoModulo" type="com.educaflow.apps.sistemaeducativo.db.CursoModulo" search="self.curso.code = :cursoCode AND self.modulo.code = :moduloCode"  create="true">
            <bind node="@curso"
                  to="curso"
                  search="self.code = :cursoCode"
                  create="false">
                <bind node="." to="code" alias="cursoCode"/>
            </bind>
            <bind node="@modulo"
                  to="modulo"
                  search="self.code = :moduloCode"
                  create="false">
                <bind node="." to="code" alias="moduloCode"/>
            </bind>
        </bind>
    </input>


</xml-inputs>