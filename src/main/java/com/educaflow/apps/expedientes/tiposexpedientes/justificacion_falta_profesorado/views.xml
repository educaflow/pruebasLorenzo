<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xmlns="http://axelor.com/xml/ns/object-views"
              xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_7.4.xsd">

    <form name="exp-JustificacionFaltaProfesorado-Templates"   width="large" title="Justificación de falta del profesorado"  model="com.educaflow.apps.expedientes.db.JustificacionFaltaProfesorado" groups="admins,users">
        <panel name="datos-profesor" title="Datos del Profesor">
            <field name="apellidos" colSpan="4" readonly="true"/>
            <field name="nombre" colSpan="4" readonly="true"/>
            <field name="dni" title="DNI" colSpan="4" readonly="true"/>
        </panel>
        <panel name="datos-falta" title="Datos de la Falta">
            <field name="dias" colSpan="1"/>
            <field name="mes" colSpan="10"  widget="SwitchSelect"/>
            <field name="anyo" colSpan="1"/>

            <field name="tipoJornadaFalta" colSpan="6" colOffset="9" widget="SwitchSelect"/>
            <field name="horaInicio" colSpan="3" showIf="tipoJornadaFalta == 'JORNADA_PARCIAL'"/>
            <field name="horaFin" colSpan="3" showIf="tipoJornadaFalta == 'JORNADA_PARCIAL'"/>
            <field name="motivoFalta" colSpan="7" widget="SwitchSelect" x-direction="vertical" />
            <field name="otroMotivo" colSpan="5"  showIf="motivoFalta == 'OTROS'"/>
        </panel>
        <panel name="datos-falta-view" title="Datos de la Falta">
            <field name="dias" colSpan="3" readonly="true"/>
            <field name="mes" colSpan="3"  readonly="true"/>
            <field name="anyo" colSpan="3" readonly="true"/>
            <field name="tipoJornadaFalta" colSpan="4" colOffset="3"  readonly="true"/>
            <field name="horaInicio" colSpan="4" showIf="tipoJornadaFalta == 'JORNADA_PARCIAL'" readonly="true"/>
            <field name="horaFin" colSpan="4" showIf="tipoJornadaFalta == 'JORNADA_PARCIAL'" readonly="true"/>
            <field name="motivoFalta" colSpan="6"   readonly="true"/>
            <field name="otroMotivo" colSpan="6" colOffset="7"  showIf="motivoFalta == 'OTROS'" readonly="true"/>
        </panel>
        <panel name="justificante-upload" title="Adjuntar justificante">
            <field name="justificante" title="Foto o PDF del justificante" widget="binary-link" colSpan="4" />
            <help variant="info" colSpan="6" colOffset="8" showIf="motivoFalta=='ENFERMEDAD_COMUN'">Es necesario aportar justificante médico a partir del segundo día</help>
            <help variant="info" colSpan="6" colOffset="8" showIf="motivoFalta=='PERMISO_MEDICO_EDUCATIVO_ASISTENCIAL' || motivoFalta=='TRASLADO_DOMICILIO' || motivoFalta=='ASISTENCIA_PRUEBAS_EXAMENES' || motivoFalta=='FALLECIMIENTO_ENFERMEDAD_GRAVE_FAMILIAR' || motivoFalta=='DEBER_INEXCUSABLE' || motivoFalta=='FUNCIONES_REPRESENTATIVAS'">Es necesario aportar justificante</help>
            <help variant="info" colSpan="6" colOffset="8" showIf="motivoFalta=='NACIMIENTO_ADOPCION_ACOGIMIENTO'">Es necesario aportar el libro de familia o justificante del médico</help>
        </panel>
        <panel name="justificante-view" title="Adjuntar justificante">
            <field name="justificante" title="Foto o PDF del justificante" widget="binary-link" colSpan="4" readonly="true"/>
        </panel>
        <panel name="documentacionParaPresentarSinFirmar" title="Solicitud" >
            <field name="new" showTitle="false" readonly="true" colSpan="9">
                <viewer depends="documentacionParaPresentarSinFirmar" ><![CDATA[
                    <>
                    <Box as="iframe" height="900" border="0" src={`ws/rest/com.axelor.meta.db.MetaFile/${documentacionParaPresentarSinFirmar.id}/content/download?inline=true&name=${documentacionParaPresentarSinFirmar.fileName}`} ></Box>
                    </>
                    ]]></viewer>
            </field>
        </panel>
        <panel name="documentacionParaPresentarSinFirmar-view" title="Solicitud" >
            <field name="new" showTitle="false" readonly="true" colSpan="9">
                <viewer depends="documentacionParaPresentarSinFirmar" ><![CDATA[
                    <>
                    <Box as="iframe" height="400" border="0" src={`ws/rest/com.axelor.meta.db.MetaFile/${documentacionParaPresentarSinFirmar.id}/content/download?inline=true&name=${documentacionParaPresentarSinFirmar.fileName}`} ></Box>
                    </>
                    ]]></viewer>
            </field>
        </panel>
        <panel name="justificanteDocumentacionPresentadaFirmadaCentro-view" title="Solicitud" >
            <field name="new2" showTitle="false" readonly="true" colSpan="12">
                <viewer depends="justificanteDocumentacionPresentadaFirmadaCentro" ><![CDATA[
                    <>
                    <Box as="iframe" height="400" border="0" src={`ws/rest/com.axelor.meta.db.MetaFile/${justificanteDocumentacionPresentadaFirmadaCentro.id}/content/download?inline=true&name=${justificanteDocumentacionPresentadaFirmadaCentro.fileName}`} ></Box>
                    </>
                    ]]></viewer>
            </field>
        </panel>
        <panel name="resolucion" title="Resolver expediente">
            <field name="tipoResolucion" widget="SwitchSelect" colSpan="8" />
            <field name="disconformidad" colSpan="12"  showIf="tipoResolucion == 'SUBSANAR_DATOS'" />
            <field name="resolucion" colSpan="12"  showIf="tipoResolucion == 'RECHAZAR'"/>

        </panel>
        <panel name="resolucion-view" title="Resolución">
            <field name="tipoResolucion" title="Resolución"  readonly="true"  />
            <field name="disconformidad" colSpan="12" title="Explicar los datos a subsanar" readonly="true" showIf="tipoResolucion == 'SUBSANAR_DATOS'" />
            <field name="resolucion" colSpan="12" title="Motivo del rechazo" readonly="true" showIf="tipoResolucion == 'RECHAZAR'"/>
        </panel>
        <panel name="disconformidad-view" title="Disconformidad de los datos presentados" showIf="(disconformidad!=null) &amp;&amp; (disconformidad!='')">
            <field name="disconformidad" title="Motivo disconformidad"  colSpan="12" readonly="true"/>
        </panel>
    </form>


    <!-- *********************************************************************************************  -->
    <!-- *************************************** ENTRADA_DATOS ***************************************  -->
    <!-- *********************************************************************************************  -->
    <form state="ENTRADA_DATOS" profile="CREADOR" >
        <include-panels>
            -datos-profesor
            -disconformidad-view
            datos-falta
            justificante-upload
        </include-panels>
        <footer>
            <buttons-left>
                <button name="DELETE" colSpan="2" css="btn-danger" outline="true" title="Borrar" onClick="action-event-expediente" prompt="¿Está seguro que desea borrar el expediente?"/>
            </buttons-left>
            <buttons-right>
                <button name="GUARDAR_DATOS" colSpan="2" title="Siguiente" onClick="action-event-expediente"/>
            </buttons-right>
        </footer>
    </form>
    <form state="ENTRADA_DATOS">
        <include-panels>
            -datos-profesor
            -disconformidad-view
            -datos-falta
            -justificante-view
        </include-panels>
        <footer>
            <buttons-left/>
            <buttons-right>
                <button name="EXIT" colSpan="2" title="Salir" onClick="action-event-expediente"/>
            </buttons-right>
        </footer>
    </form>

    <!-- **********************************************************************************************  -->
    <!-- *********************************** PENDIENTE_PRESENTACION ***********************************  -->
    <!-- **********************************************************************************************  -->
    <form state="PENDIENTE_PRESENTACION" profile="CREADOR">
        <include-panels>
            -documentacionParaPresentarSinFirmar
        </include-panels>
        <footer>
            <buttons-left>
                <button name="BACK" colSpan="2" outline="true" title="Atrás" onClick="action-event-expediente"/>
            </buttons-left>
            <buttons-right>
                <button name="PRESENTAR" colSpan="4" title="Firmar con AutoFirma__!! y Presentar la solicitud" onClick="serial:exp-JustificacionFaltaProfesorado-firmarDocumentacionParaPresentar-action,action-event-expediente" prompt="¿Esta seguro que desea presentar la documentación?&lt;br&gt;No podrá deshacer esta acción"/>
            </buttons-right>
        </footer>
        <panel title="ayuda" showFrame="false" >
            <help variant="info" colSpan="12" colOffset="0" >Para presentar la solicitud debe tener la aplicación de AutoFirma instalada y un certificado digital válido</help>
        </panel>
    </form>
    <form state="PENDIENTE_PRESENTACION">
        <include-panels>
            -documentacionParaPresentarSinFirmar-view
        </include-panels>
        <footer>
            <buttons-left/>
            <buttons-right>
                <button name="EXIT" colSpan="2" title="Salir" onClick="action-event-expediente"/>
            </buttons-right>
        </footer>
    </form>

    <action-method name="exp-JustificacionFaltaProfesorado-firmarDocumentacionParaPresentar-action" model="com.educaflow.apps.expedientes.db.JustificacionFaltaProfesorado">
        <call
                class="com.educaflow.apps.expedientes.tiposexpedientes.justificacion_falta_profesorado.ActionController"
                method="firmarDocumentacionParaPresentar"
        />
    </action-method>
    <!-- **********************************************************************************************  -->
    <!-- ************************************ PENDIENTE_RESOLUCION ************************************  -->
    <!-- **********************************************************************************************  -->
    <form state="PENDIENTE_RESOLUCION" profile="RESPONSABLE" >
        <include-panels>
            -datos-profesor
            -datos-falta-view
            -justificanteDocumentacionPresentadaFirmadaCentro-view
            resolucion
        </include-panels>
        <footer>
            <buttons-left/>
            <buttons-right>
                <button name="RESOLVER" colSpan="3" colOffset="9" title="Resolver el expediente" onClick="action-event-expediente" prompt="¿Esta seguro que desea resolver el expediente?&lt;br&gt;No podrá deshacer esta acción"/>
            </buttons-right>
        </footer>
    </form>

    <form state="PENDIENTE_RESOLUCION">
        <include-panels>
            -datos-profesor
            -datos-falta-view
            -justificanteDocumentacionPresentadaFirmadaCentro-view
        </include-panels>
        <footer>
            <buttons-left/>
            <buttons-right>
                <button name="EXIT" colSpan="2" title="Salir" onClick="action-event-expediente"/>
            </buttons-right>
        </footer>
    </form>




    <!-- **********************************************************************  -->
    <!-- ****************************** ACEPTADO ******************************  -->
    <!-- **********************************************************************  -->
    <form state="ACEPTADO">
        <include-panels>
            -datos-profesor
            -datos-falta-view
            -justificanteDocumentacionPresentadaFirmadaCentro-view
            -resolucion-view
        </include-panels>
        <footer>
            <buttons-left/>
            <buttons-right>
                <button name="EXIT" colSpan="2" title="Salir" onClick="action-event-expediente"/>
            </buttons-right>
        </footer>
    </form>


    <!-- **********************************************************************  -->
    <!-- ****************************** RECHAZADO ******************************  -->
    <!-- **********************************************************************  -->
    <form  state="RECHAZADO">
        <include-panels>
            -datos-profesor
            -datos-falta-view
            -justificanteDocumentacionPresentadaFirmadaCentro-view
            -resolucion-view
        </include-panels>
        <footer>
            <buttons-left/>
            <buttons-right>
                <button name="EXIT" colSpan="2" title="Salir" onClick="action-event-expediente"/>
            </buttons-right>
        </footer>
    </form>






</object-views>